<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" href="/assets/css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" href="/assets/css/custom.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
      integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>RedeTrade</title>
    <meta name="author" content="Lucas Santana" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
      integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav-bar></nav-bar>

    <div class="wrapper">
      <!-- Sidebar  -->
      <side-bar></side-bar>

      <!-- Page Content  -->
      <div id="content">
        <div class="container py-2">
          <div class="container-simple">
            <p class="text-muted font-weight-bold">Informação oferta</p>
          </div>

          <div class="container p-4 bg-white rounded shadow secondary">
            <p class="h4 text-center" id="titulo">Click Dogs</p>
            <div class="row align-items-center">
              <div class="col-md-6 text-center p-0">
                <img
                  class="img-fluid"
                  src="https://redetrade.com.br/sistemaredetrade/wp-content/uploads/2022/10/WhatsApp-Image-2022-10-19-at-15.53.19.jpeg"
                  alt=""
                  id="img_path"
                  name="img_path"
                  style="    width: 450px ;
                  height: 554px;"
                />
              </div>
              <div class="col-md-6 text-left">
                <p
                  class="mb-1 text-center bg-purple text-white"
                  id="data_encerramento"
                >Termina em 15/10/2022</p>
                <div class="preco">  <p class="h4" id="titulo" style="margin-bottom: 5px;">RT$ 450,00</p>
                  <div class="info-value">
                    <input type="number" placeholder="Quantidade" class="form-control col-6 " id="inputNomeFantasia"> 
                    <button type="button" class="btn btn-orange  btn-sm" id="localizarBtn">
                    Permultar
                    </button>
                  </div></div>
                <div class="informacoes">
                  <p class="font-weight-bold mb-0">Informações</p>
                <p class="mb-0" id="vendedor">Vendido por : Click Dogs</p>
                <p class="mb-0" id="cidade">Cidade : São Paulo - SP</p>
                <p class="mb-0" id="agencia">Agência : Matriz</p>
                <p class="mb-0" id="atendimento">Atendimento : Vouchers</p>
                </div>
                <div class="descricao">
                  <p class="font-weight-bold mb-0">Descrição da Oferta</p>
                  <p id="descricao"">
                  luctus nec ullamcorper mattis, pulvinar dapibus leo.nec
                  ullamcorper mattis, pulvinar dapibus leo.nec ullamcorper
                  mattis, pulvinar dapibus
                  </p>
                </div>
                <div class="restricao">
                  <p class="font-weight-bold mb-0">Restrições da oferta</p>
                  <p id="restricao"">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit.
                    Optio, eaque alias rem tempora corporis iusto, dolorem
                    eligendi doloremque ullam velit suscipit aperiam voluptatibus
                    sint debitis veritatis. Quia qui recusandae fuga!
                  </p>
                </div>
                <p class="h5 text-center bg-success text-white" id="status">
                  Oferta Ativa
                </p>
              </div>
            </div>
          </div>
        </div>
        <footer-bar></footer-bar>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.js"
      integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/main.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- <script src="/__/firebase/7.21.0/firebase-app.js"></script> -->

    <!-- Import Components -->
    <script src="/components/navbar.js"></script>
    <script src="/components/sidebar2.js"></script>
    <script src="/components/footer.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- <script src="/__/firebase/7.21.0/firebase-analytics.js"></script> -->

    <!-- Initialize Firebase -->
    <!-- <script src="/__/firebase/init.js"></script> -->
    <script src="/assets/js/config.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/LexLuthorDev/formatar-moeda@main/dist/index.js"></script>
    <script>
      // JavaScript code to extract the 'id' from the URL
      const queryParams = new URLSearchParams(window.location.search);
      const id = queryParams.get("id");
      //console.log(id); // You can use this 'id' variable to fetch the data related to the offer.
      // Monta a URL da requisição GET com o parâmetro idAgencia incluindo o usuarioId
      const apiUrl = `${window.apiBaseUrl}/ofertas/${id}`;
      fetch(apiUrl)
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
          let valor = data.valor;
          //let valorFormatado = format.formatarMoeda(valor, 'RT');
          let valorFormatado = valor + " RT";

          document.getElementById("valor").innerText = valorFormatado;
          document.getElementById("titulo").innerText = data.titulo;
          document.getElementById("informacoes").innerText = data.obs;
          document.getElementById("descricao").innerText = data.descricao;
          // Atribua o caminho da imagem ao atributo src da imagem
          const img_path = document.getElementById("img_path");
          // Substituir as barras invertidas "\" por barras normais "/"
          const imagemUrl = `${window.apiBaseUrl}/${data.img_path.replace(
            /\\/g,
            "/"
          )}`;
          img_path.src = imagemUrl;
        })
        .catch((error) => console.error("Erro:", error));
    </script>
  </body>
</html>
